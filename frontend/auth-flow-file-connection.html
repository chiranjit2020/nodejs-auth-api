<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auth Flow - File Connections</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Courier New', monospace;
            background: #0a0a0a;
            color: #00ff00;
            padding: 20px;
            overflow-x: auto;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            padding: 20px;
            border: 2px solid #00ff00;
            margin-bottom: 30px;
            background: #0f0f0f;
        }
        .flow-container {
            position: relative;
            padding: 40px;
        }
        .file-node {
            position: absolute;
            padding: 15px 20px;
            border: 2px solid #00ff00;
            background: #0a0a0a;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 200px;
        }
        .file-node:hover {
            background: #1a1a1a;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
            transform: scale(1.05);
        }
        .file-name {
            color: #00ff00;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .file-desc {
            color: #888;
            font-size: 12px;
        }
        .file-type {
            color: #ffd700;
            font-size: 11px;
            margin-top: 5px;
        }
        svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        .connection-line {
            stroke: #00ff00;
            stroke-width: 2;
            fill: none;
            stroke-dasharray: 5, 5;
            animation: dash 20s linear infinite;
        }
        .connection-arrow {
            fill: #00ff00;
        }
        @keyframes dash {
            to {
                stroke-dashoffset: -1000;
            }
        }
        .layer {
            margin-bottom: 40px;
        }
        .layer-title {
            color: #ffd700;
            margin-bottom: 20px;
            padding: 10px;
            border-left: 4px solid #ffd700;
            background: #1a1a1a;
        }
        .legend {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #0f0f0f;
            border: 2px solid #00ff00;
            padding: 15px;
            max-width: 300px;
        }
        .legend-item {
            margin: 10px 0;
            display: flex;
            align-items: center;
        }
        .legend-line {
            width: 40px;
            height: 2px;
            background: #00ff00;
            margin-right: 10px;
            animation: dash 2s linear infinite;
        }
        .flow-step {
            background: #0f0f0f;
            border-left: 3px solid #00ff00;
            padding: 15px;
            margin: 20px 0;
        }
        .step-number {
            color: #ffd700;
            font-weight: bold;
        }
        .code-snippet {
            background: #000;
            border: 1px solid #333;
            padding: 10px;
            margin: 10px 0;
            overflow-x: auto;
        }
        .highlight {
            color: #ff00ff;
        }
        .success {
            color: #00ff00;
        }
        .error {
            color: #ff0000;
        }
        .warning {
            color: #ffd700;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <pre>
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   JWT AUTHENTICATION SYSTEM - FILE CONNECTION MAP            â•‘
â•‘   Day-4: Logout & Refresh Token Invalidation                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            </pre>
        </div>

        <div class="legend">
            <div style="color: #ffd700; margin-bottom: 10px; font-weight: bold;">LEGEND</div>
            <div class="legend-item">
                <div class="legend-line"></div>
                <span>Data Flow</span>
            </div>
            <div class="legend-item">
                <span style="color: #00ff00;">â—</span>
                <span style="margin-left: 10px;">Success</span>
            </div>
            <div class="legend-item">
                <span style="color: #ff0000;">â—</span>
                <span style="margin-left: 10px;">Error/Block</span>
            </div>
            <div class="legend-item">
                <span style="color: #ffd700;">â—</span>
                <span style="margin-left: 10px;">Database</span>
            </div>
        </div>

        <!-- Flow Visualization -->
        <div style="margin: 40px 0;">
            <div class="layer-title">ğŸ“ PROJECT STRUCTURE & CONNECTIONS</div>
            
            <pre class="code-snippet">
<span class="warning">nodejs-auth-api/</span>
â”œâ”€â”€ <span class="success">.env</span>                      <span class="highlight">â†’ Environment variables</span>
â”œâ”€â”€ <span class="success">server.js</span>                 <span class="highlight">â†’ Main entry point</span>
â”œâ”€â”€ <span class="success">package.json</span>
â””â”€â”€ <span class="warning">src/</span>
    â”œâ”€â”€ <span class="warning">config/</span>
    â”‚   â””â”€â”€ <span class="success">db.js</span>             <span class="highlight">â†’ MongoDB connection</span>
    â”œâ”€â”€ <span class="warning">middlewares/</span>
    â”‚   â””â”€â”€ <span class="success">auth.js</span>           <span class="highlight">â†’ JWT verification middleware</span>
    â”œâ”€â”€ <span class="warning">models/</span>
    â”‚   â””â”€â”€ <span class="success">userModel.js</span>      <span class="highlight">â†’ User schema + refreshToken field</span>
    â”œâ”€â”€ <span class="warning">routes/</span>
    â”‚   â””â”€â”€ <span class="success">userRoutes.js</span>     <span class="highlight">â†’ Route definitions (optional)</span>
    â””â”€â”€ <span class="warning">controllers/</span>
        â””â”€â”€ <span class="success">userController.js</span> <span class="highlight">â†’ Business logic (optional)</span>
            </pre>
        </div>

        <!-- Connection Flow -->
        <div style="margin: 40px 0;">
            <div class="layer-title">ğŸ”„ FILE CONNECTION FLOW</div>

            <div class="flow-step">
                <span class="step-number">[STEP 1]</span> <span class="success">server.js</span> starts
                <pre class="code-snippet">
<span class="highlight">import</span> dotenv <span class="highlight">from</span> 'dotenv'
<span class="highlight">import</span> { User } <span class="highlight">from</span> './src/models/userModel.js'
<span class="highlight">import</span> { protect } <span class="highlight">from</span> './src/middlewares/auth.js'

dotenv.config() <span class="success">// Loads .env file</span>
                </pre>
            </div>

            <div class="flow-step">
                <span class="step-number">[STEP 2]</span> <span class="warning">.env</span> provides configuration
                <pre class="code-snippet">
PORT=5000
MONGO_URI=mongodb://localhost:27017
JWT_ACCESS_SECRET=fed4a1b0541f497ba05955be16770124
JWT_REFRESH_SECRET=bcb1c84699d546d4a0b3ff285941e1f8
JWT_EXPIRES_IN=1m
JWT_REFRESH_SECRET_EXPIRES_IN=7d
                </pre>
            </div>

            <div class="flow-step">
                <span class="step-number">[STEP 3]</span> <span class="success">userModel.js</span> defines schema
                <pre class="code-snippet">
<span class="highlight">const</span> userSchema = {
  name: String,
  email: String,
  password: String,
  <span class="warning">refreshToken: String</span>  <span class="success">// ğŸ”¥ DAY-4 ADDITION</span>
}
                </pre>
            </div>

            <div class="flow-step">
                <span class="step-number">[STEP 4]</span> Request comes in â†’ <span class="success">server.js</span> handles it
            </div>

            <div class="flow-step">
                <span class="step-number">[STEP 5]</span> Protected routes use <span class="success">auth.js</span> middleware
                <pre class="code-snippet">
app.get('/api/users/me', <span class="warning">protect</span>, async (req, res) => {
  <span class="success">// protect middleware verifies JWT</span>
  <span class="success">// extracts user ID from token</span>
  <span class="success">// attaches to req.user</span>
})
                </pre>
            </div>
        </div>

        <!-- Detailed Flow Diagram -->
        <div style="margin: 40px 0;">
            <div class="layer-title">ğŸ¯ REQUEST FLOW - LOGIN EXAMPLE</div>
            
            <pre class="code-snippet" style="line-height: 2;">
<span class="highlight">CLIENT</span> (frontend/index.html)
   â”‚
   â”‚ <span class="success">POST /api/users/login</span>
   â”‚ { email, password }
   â”‚
   â–¼
<span class="highlight">SERVER.JS</span>
   â”‚
   â”œâ”€â†’ <span class="warning">Verify credentials</span>
   â”‚   â”‚
   â”‚   â””â”€â†’ <span class="highlight">User.findOne({ email })</span>
   â”‚       â”‚
   â”‚       â””â”€â†’ <span class="warning">userModel.js</span>
   â”‚           â”‚
   â”‚           â””â”€â†’ <span class="warning">MongoDB</span> ğŸ—„ï¸
   â”‚               â”‚
   â”‚               â–¼
   â”‚           <span class="success">User found</span>
   â”‚
   â”œâ”€â†’ <span class="warning">bcrypt.compare(password)</span>
   â”‚   â”‚
   â”‚   â””â”€â†’ <span class="success">Password valid</span>
   â”‚
   â”œâ”€â†’ <span class="warning">Generate tokens</span>
   â”‚   â”‚
   â”‚   â”œâ”€â†’ <span class="success">jwt.sign()</span> â†’ <span class="highlight">accessToken</span> (1m)
   â”‚   â””â”€â†’ <span class="success">jwt.sign()</span> â†’ <span class="highlight">refreshToken</span> (7d)
   â”‚
   â”œâ”€â†’ <span class="warning">Store refreshToken in DB</span>
   â”‚   â”‚
   â”‚   â””â”€â†’ <span class="highlight">user.refreshToken = refreshToken</span>
   â”‚       â”‚
   â”‚       â””â”€â†’ <span class="highlight">user.save()</span>
   â”‚           â”‚
   â”‚           â””â”€â†’ <span class="warning">MongoDB</span> ğŸ—„ï¸
   â”‚               â”‚
   â”‚               â–¼
   â”‚           <span class="success">Stored in DB</span>
   â”‚
   â””â”€â†’ <span class="success">Return { token, refreshToken }</span>
       â”‚
       â–¼
<span class="highlight">CLIENT</span>
   â”‚
   â””â”€â†’ <span class="warning">localStorage.setItem('accessToken')</span>
   â””â”€â†’ <span class="warning">localStorage.setItem('refreshToken')</span>
            </pre>
        </div>

        <!-- Protected Route Flow -->
        <div style="margin: 40px 0;">
            <div class="layer-title">ğŸ”’ PROTECTED ROUTE FLOW - /api/users/me</div>
            
            <pre class="code-snippet" style="line-height: 2;">
<span class="highlight">CLIENT</span>
   â”‚
   â”‚ <span class="success">GET /api/users/me</span>
   â”‚ Header: Authorization: Bearer <span class="warning">&lt;accessToken&gt;</span>
   â”‚
   â–¼
<span class="highlight">SERVER.JS</span>
   â”‚
   â”œâ”€â†’ <span class="warning">protect</span> middleware (<span class="highlight">auth.js</span>)
   â”‚   â”‚
   â”‚   â”œâ”€â†’ Extract token from header
   â”‚   â”‚   <span class="success">const token = req.headers.authorization?.split(" ")[1]</span>
   â”‚   â”‚
   â”‚   â”œâ”€â†’ Verify token
   â”‚   â”‚   <span class="success">jwt.verify(token, JWT_ACCESS_SECRET)</span>
   â”‚   â”‚   â”‚
   â”‚   â”‚   â”œâ”€â†’ <span class="success">Valid</span> â†’ Extract user ID
   â”‚   â”‚   â”‚   â”‚
   â”‚   â”‚   â”‚   â””â”€â†’ <span class="success">req.user = decoded.id</span>
   â”‚   â”‚   â”‚       â”‚
   â”‚   â”‚   â”‚       â””â”€â†’ <span class="success">next()</span> â†’ Continue to route handler
   â”‚   â”‚   â”‚
   â”‚   â”‚   â””â”€â†’ <span class="error">Invalid/Expired</span> â†’ Return 401
   â”‚   â”‚
   â”‚   â””â”€â†’ <span class="success">Token valid, continue</span>
   â”‚
   â””â”€â†’ Route handler executes
       â”‚
       â””â”€â†’ <span class="highlight">User.findById(req.user)</span>
           â”‚
           â””â”€â†’ <span class="warning">userModel.js</span>
               â”‚
               â””â”€â†’ <span class="warning">MongoDB</span> ğŸ—„ï¸
                   â”‚
                   â–¼
               <span class="success">User data</span>
                   â”‚
                   â–¼
           <span class="success">Return { user }</span>
                   â”‚
                   â–¼
<span class="highlight">CLIENT</span>
   â”‚
   â””â”€â†’ <span class="success">Display user info</span>
            </pre>
        </div>

        <!-- Refresh Flow -->
        <div style="margin: 40px 0;">
            <div class="layer-title">ğŸ”„ REFRESH TOKEN FLOW - /api/users/refresh</div>
            
            <pre class="code-snippet" style="line-height: 2;">
<span class="highlight">CLIENT</span>
   â”‚
   â”‚ Access token expired (after 1 minute)
   â”‚
   â”‚ <span class="success">POST /api/users/refresh</span>
   â”‚ { refreshToken }
   â”‚
   â–¼
<span class="highlight">SERVER.JS</span>
   â”‚
   â”œâ”€â†’ <span class="warning">Step 1: Verify JWT signature</span>
   â”‚   â”‚
   â”‚   â””â”€â†’ <span class="success">jwt.verify(refreshToken, JWT_REFRESH_SECRET)</span>
   â”‚       â”‚
   â”‚       â”œâ”€â†’ <span class="success">Valid</span> â†’ Extract user ID
   â”‚       â”‚
   â”‚       â””â”€â†’ <span class="error">Invalid</span> â†’ Return 401
   â”‚
   â”œâ”€â†’ <span class="warning">Step 2: Check DB ğŸ”¥ CRITICAL SECURITY CHECK</span>
   â”‚   â”‚
   â”‚   â””â”€â†’ <span class="highlight">User.findById(decoded.id).select('+refreshToken')</span>
   â”‚       â”‚
   â”‚       â””â”€â†’ <span class="warning">MongoDB</span> ğŸ—„ï¸
   â”‚           â”‚
   â”‚           â”œâ”€â†’ Get stored refreshToken from DB
   â”‚           â”‚   â”‚
   â”‚           â”‚   â””â”€â†’ <span class="warning">Compare: DB token === Request token?</span>
   â”‚           â”‚       â”‚
   â”‚           â”‚       â”œâ”€â†’ <span class="success">MATCH</span> â†’ Token is valid
   â”‚           â”‚       â”‚   â”‚
   â”‚           â”‚       â”‚   â””â”€â†’ Generate new access token
   â”‚           â”‚       â”‚       â”‚
   â”‚           â”‚       â”‚       â””â”€â†’ <span class="success">jwt.sign() â†’ newAccessToken</span>
   â”‚           â”‚       â”‚           â”‚
   â”‚           â”‚       â”‚           â””â”€â†’ <span class="success">Return { token }</span>
   â”‚           â”‚       â”‚
   â”‚           â”‚       â””â”€â†’ <span class="error">NO MATCH</span> â†’ STOLEN TOKEN DETECTED
   â”‚           â”‚           â”‚
   â”‚           â”‚           â””â”€â†’ <span class="error">Return 401 "Invalid refresh token"</span>
   â”‚           â”‚
   â”‚           â””â”€â†’ <span class="error">User not found</span> â†’ Return 401
   â”‚
   â””â”€â†’ <span class="success">Send new access token to client</span>
       â”‚
       â–¼
<span class="highlight">CLIENT</span>
   â”‚
   â””â”€â†’ <span class="warning">localStorage.setItem('accessToken', newToken)</span>
   â””â”€â†’ <span class="success">Retry original request</span>
            </pre>
        </div>

        <!-- Logout Flow -->
        <div style="margin: 40px 0;">
            <div class="layer-title">ğŸšª LOGOUT FLOW - /api/users/logout (DAY-4)</div>
            
            <pre class="code-snippet" style="line-height: 2;">
<span class="highlight">CLIENT - DEVICE A</span> (Chrome)
   â”‚
   â”‚ User clicks "Logout"
   â”‚
   â”‚ <span class="success">POST /api/users/logout</span>
   â”‚ { refreshToken }
   â”‚
   â–¼
<span class="highlight">SERVER.JS</span>
   â”‚
   â”œâ”€â†’ <span class="warning">Verify refresh token</span>
   â”‚   â”‚
   â”‚   â””â”€â†’ <span class="success">jwt.verify(refreshToken, JWT_REFRESH_SECRET)</span>
   â”‚       â”‚
   â”‚       â””â”€â†’ <span class="success">Valid</span> â†’ Extract user ID
   â”‚
   â”œâ”€â†’ <span class="warning">Find user</span>
   â”‚   â”‚
   â”‚   â””â”€â†’ <span class="highlight">User.findById(decoded.id)</span>
   â”‚       â”‚
   â”‚       â””â”€â†’ <span class="warning">MongoDB</span> ğŸ—„ï¸
   â”‚
   â”œâ”€â†’ <span class="warning">ğŸ”¥ Clear refresh token from DB</span>
   â”‚   â”‚
   â”‚   â””â”€â†’ <span class="highlight">user.refreshToken = null</span>
   â”‚       â”‚
   â”‚       â””â”€â†’ <span class="highlight">user.save()</span>
   â”‚           â”‚
   â”‚           â””â”€â†’ <span class="warning">MongoDB</span> ğŸ—„ï¸
   â”‚               â”‚
   â”‚               â–¼
   â”‚           <span class="success">refreshToken = null in DB</span>
   â”‚
   â””â”€â†’ <span class="success">Return { message: "Logged out from all devices" }</span>
       â”‚
       â–¼
<span class="highlight">CLIENT - DEVICE A</span>
   â”‚
   â””â”€â†’ <span class="warning">localStorage.removeItem('accessToken')</span>
   â””â”€â†’ <span class="warning">localStorage.removeItem('refreshToken')</span>
   â””â”€â†’ <span class="success">Show login form</span>


<span class="error">â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>

<span class="highlight">CLIENT - DEVICE B</span> (Firefox - still has old tokens in localStorage)
   â”‚
   â”‚ User tries to use app
   â”‚
   â”‚ <span class="success">GET /api/users/me</span>
   â”‚ Header: Authorization: Bearer <span class="error">&lt;expired accessToken&gt;</span>
   â”‚
   â–¼
<span class="highlight">SERVER.JS</span>
   â”‚
   â””â”€â†’ <span class="error">401 Unauthorized</span> (token expired)
       â”‚
       â–¼
<span class="highlight">CLIENT - DEVICE B</span>
   â”‚
   â”œâ”€â†’ Auto-refresh triggered
   â”‚   â”‚
   â”‚   â””â”€â†’ <span class="success">POST /api/users/refresh</span>
   â”‚       â”‚ { refreshToken: <span class="error">&lt;old token&gt;</span> }
   â”‚       â”‚
   â”‚       â–¼
   â”‚   <span class="highlight">SERVER.JS</span>
   â”‚       â”‚
   â”‚       â”œâ”€â†’ Verify JWT â†’ <span class="success">Valid</span>
   â”‚       â”‚
   â”‚       â”œâ”€â†’ Check DB
   â”‚       â”‚   â”‚
   â”‚       â”‚   â””â”€â†’ <span class="warning">user.refreshToken</span> = <span class="error">null</span> (cleared by Device A)
   â”‚       â”‚       â”‚
   â”‚       â”‚       â””â”€â†’ <span class="error">Token mismatch!</span>
   â”‚       â”‚           â”‚
   â”‚       â”‚           â””â”€â†’ <span class="error">Return 401 "Invalid refresh token"</span>
   â”‚       â”‚
   â”‚       â””â”€â†’ <span class="error">Refresh failed</span>
   â”‚           â”‚
   â”‚           â–¼
   â”‚   <span class="highlight">CLIENT - DEVICE B</span>
   â”‚       â”‚
   â”‚       â””â”€â†’ <span class="error">Clear local tokens</span>
   â”‚       â””â”€â†’ <span class="error">Show login form</span>
   â”‚       â””â”€â†’ <span class="success">âœ“ USER LOGGED OUT FROM ALL DEVICES</span>
            </pre>
        </div>

        <!-- Security Check Visualization -->
        <div style="margin: 40px 0;">
            <div class="layer-title">ğŸ›¡ï¸ SECURITY: WHY WE CHECK DB</div>
            
            <div class="flow-step">
                <span class="step-number">[SCENARIO]</span> Hacker steals refresh token
            </div>

            <pre class="code-snippet" style="line-height: 2;">
<span class="error">ğŸ”´ WITHOUT DB CHECK (Vulnerable)</span>
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. User logs in â†’ Gets refreshToken
2. <span class="error">Hacker steals refreshToken</span>
3. User logs out
4. Hacker uses stolen token â†’ <span class="error">jwt.verify() passes âœ“</span>
5. Hacker gets new access token â†’ <span class="error">SUCCESS (BAD!)</span>


<span class="success">ğŸŸ¢ WITH DB CHECK (Secure - Day-4)</span>
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. User logs in â†’ Gets refreshToken
2. Server stores refreshToken in DB
3. <span class="error">Hacker steals refreshToken</span>
4. User logs out â†’ <span class="warning">DB refreshToken = null</span>
5. Hacker uses stolen token:
   â”‚
   â”œâ”€â†’ jwt.verify() â†’ <span class="success">Valid JWT âœ“</span>
   â”‚
   â””â”€â†’ Check DB â†’ <span class="error">Token doesn't match (null in DB)</span>
       â”‚
       â””â”€â†’ <span class="error">BLOCKED! Return 401</span>

<span class="success">âœ“ Hacker cannot generate new access tokens</span>
<span class="success">âœ“ User is safe</span>
            </pre>
        </div>

        <!-- File Dependencies -->
        <div style="margin: 40px 0;">
            <div class="layer-title">ğŸ“¦ FILE DEPENDENCIES MAP</div>
            
            <pre class="code-snippet">
<span class="warning">server.js</span>
    â”œâ”€â”€ depends on â†’ <span class="success">.env</span>
    â”‚   â””â”€â”€ provides â†’ Environment variables
    â”‚
    â”œâ”€â”€ depends on â†’ <span class="success">src/models/userModel.js</span>
    â”‚   â””â”€â”€ provides â†’ User schema & methods
    â”‚       â””â”€â”€ depends on â†’ <span class="warning">mongoose</span>
    â”‚           â””â”€â”€ connects to â†’ <span class="warning">MongoDB</span>
    â”‚
    â”œâ”€â”€ depends on â†’ <span class="success">src/middlewares/auth.js</span>
    â”‚   â””â”€â”€ provides â†’ protect() middleware
    â”‚       â””â”€â”€ depends on â†’ <span class="warning">jsonwebtoken</span>
    â”‚
    â””â”€â”€ depends on â†’ <span class="warning">npm packages</span>
        â”œâ”€â”€ express
        â”œâ”€â”€ cors
        â”œâ”€â”€ body-parser
        â”œâ”€â”€ morgan
        â”œâ”€â”€ jsonwebtoken
        â”œâ”€â”€ bcrypt
        â””â”€â”€ dotenv


<span class="warning">frontend/index.html</span>
    â””â”€â”€ depends on â†’ <span class="success">frontend/main.js</span>
        â””â”€â”€ makes requests to â†’ <span class="warning">http://127.0.0.1:5000/api/*</span>
            â””â”€â”€ handled by â†’ <span class="success">server.js</span>
            </pre>
        </div>

        <!-- Summary -->
        <div style="margin: 40px 0; padding: 20px; border: 2px solid #ffd700; background: #0f0f0f;">
            <div style="color: #ffd700; font-size: 18px; margin-bottom: 15px;">ğŸ¯ KEY TAKEAWAYS</div>
            <pre>
<span class="success">1. server.js</span> is the MAIN CONTROLLER
   â”œâ”€â”€ Imports User model
   â”œâ”€â”€ Imports protect middleware
   â””â”€â”€ Defines all routes

<span class="success">2. userModel.js</span> is the DATABASE SCHEMA
   â””â”€â”€ Defines how user data is stored (including refreshToken)

<span class="success">3. auth.js</span> is the SECURITY GUARD
   â””â”€â”€ Verifies JWT tokens before allowing access

<span class="success">4. .env</span> is the CONFIGURATION
   â””â”€â”€ Stores sensitive keys and settings

<span class="warning">5. MongoDB</span> is the TRUTH SOURCE
   â””â”€â”€ Stores user data including refreshToken
   â””â”€â”€ Used to validate refresh tokens (Day-4)

<span class="highlight">6. Frontend</span> is the CLIENT
   â””â”€â”€ Makes requests to server
   â””â”€â”€ Stores tokens in localStorage
   â””â”€â”€ Handles auto-refresh on 401 errors
            </pre>
        </div>

        <div style="text-align: center; padding: 30px; border-top: 2px solid #00ff00; margin-top: 40px;">
            <pre>
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                               â•‘
â•‘   NOW GO TEST EVERYTHING AND COME BACK WITH YOUR RESULTS     â•‘
â•‘                                                               â•‘
â•‘   Remember: Code that you don't understand is code you       â•‘
â•‘   can't debug. Trace every line. Test every scenario.        â•‘
â•‘                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            </pre>
        </div>
    </div>
</body>
</html>